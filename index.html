<!DOCTYPE html>
<html lang="en">

<!--
╔══════════════════════════════════════════════════╗
║                                                  ║
║                 DOM amb la firma                 ║
║                                                  ║
╚══════════════════════════════════════════════════╝
-->

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>Mar Kralovna</title>
	<script src="recursos/llibreries/p5js/p5.js"></script>
</head>


<body onclick=" location.href = 'gallery' ">
	<div class="centered">
		<h1 id="firma">Mar<br>Kralovna</h1>
	</div>
	<!-- <svg id="firma" xmlns="http://www.w3.org/2000/svg" width="200" height="50" viewBox="0 0 200 50" >
		<path d="m 5 30 c 9.399125,-6.5285 17.975035,-39.00331 36.247916,-0.52918 8.853811,-22.61962 16.665742,-30.35328 29.368751,0.26459 6.357494,-6.36196 9.93712,-14.32798 26.458328,-21.9604 -22.066002,9.31525 2.30361,46.89162 17.4625,12.96457 l 5.55625,-12.43541 c 5.23342,9.83884 10.42433,17.85984 19.31458,21.69582 12.18808,5.25894 9.63263,-46.17915 39.80635,-1.14278 3.68999,5.1926 11.52282,1.40737 11.52282,1.40737" />
	</svg> -->
</body>





<!--
╔══════════════════════════════════════════════════╗
║                                                  ║
║                      ESTILS                      ║
║                                                  ║
╚══════════════════════════════════════════════════╝
-->


<style>
	@font-face {
		font-family: font;
		src: url(./recursos/fonts/Poiret_One/PoiretOne-Regular.ttf);
	}

	.centered {
		position: absolute;
		top: 50%;
		left: 50%;
		transform: translate(-50%, -50%);
		/*height: 100px;*/
		width: max-content;
		text-align: center;
	}

	#firma {
		font-family: font;
		font-size: 48pt;
		background: hsl(240, 60%, 70%);
		background-clip: border-box;
		-webkit-background-clip: text;
		-webkit-text-fill-color: transparent;
		/*text-transform: uppercase;*/
	}

	body {
		margin: 0;
		height: 100vh;
		width: 100vw;
		overflow: hidden;
		background: hsl(0, 0%, 13%);
	}

	@media only screen and (max-width: 500px) { #firma { font-size: 32pt; } }
	@media only screen and (max-width: 250px) { #firma { font-size: 24pt; } }
</style>





<!--
╔══════════════════════════════════════════════════╗
║                                                  ║
║          lÒGICA de la geomatria de fons          ║
║                                                  ║
╚══════════════════════════════════════════════════╝
-->


<script>
	const posX = window.innerWidth * 0.5;
	const posY = window.innerHeight * 0.5;
	const size = ( posX > posY ? posX : posY ) * 1.25;
	const color = { 'H': 180, 'S': 60, 'L': 70, 'range': 60 };

	function setup() {
		createCanvas(window.innerWidth, window.innerHeight);
		frameRate(12);

		angleMode(RADIANS);

		noFill();
		strokeWeight(2);
		colorMode(HSL);
	}

	function draw() {

		/* ┌──────────────────────────────────────────────────┐
		   │                  PREPARAR COSES                  │
		   └──────────────────────────────────────────────────┘ */

		background(0, 0, 13);

		color['H'] = (color['H'] + 1) % 360;
		
		const numNodes = 32;//const numNodes = parseInt( map( mouseX, 0, posX * 2, 3, 64 ) );
		const angle = parseInt( map( mouseX, 0, posX * 2, 0, TAU) );
		const disitanceBetweenNodes = parseInt( map( mouseY, 0, posY * 2, 1, numNodes * 0.3) );
		const ratioObertura = .75;

		var h = color['H'];
		const n = floor( numNodes * ratioObertura );
		const COLOR_INCR = color['range'] / numNodes;


		/* ┌──────────────────────────────────────────────────┐
		   │                  DIBUIXAR LLUNA                  │
		   └──────────────────────────────────────────────────┘ */

		push();
		translate(posX, posY);
		rotate(angle);


		/* ┌──────────────────────────────┐
		   │      Dibuixar l'entramat     │
		   └──────────────────────────────┘ */

		for (let i = 0; i < n; i++) {
			stroke( h, color['S'], color['L'] );
			h = (h + COLOR_INCR) % 360;
			const a1 = HALF_PI - TAU / numNodes * i;
			const p1x = cos(a1) * size * 0.5;
			const p1y = sin(a1) * size * 0.5;
			const a2 = HALF_PI - TAU / numNodes * (i + disitanceBetweenNodes);
			const p2x = cos(a2) * size * 0.5;
			const p2y = sin(a2) * size * 0.5;
			line(p1x, p1y, p2x, p2y);
		}


		/* ┌──────────────────────────────┐
		   │ Dibuixar el polígon que farà de contonr de la lluna │
		   └──────────────────────────────┘ */

		var h = color['H'];
		for (let i = 0; i < n+disitanceBetweenNodes-1; i++) {
			stroke( h, color['S'], color['L'] );
			h = (h + COLOR_INCR) % 360;
			const a1 = HALF_PI - TAU / numNodes * i;
			const p1x = cos(a1) * size * 0.5;
			const p1y = sin(a1) * size * 0.5;
			const a2 = HALF_PI - TAU / numNodes * (i + 1);
			const p2x = cos(a2) * size * 0.5;
			const p2y = sin(a2) * size * 0.5;
			line(p1x, p1y, p2x, p2y);
		}

		pop();

		/* ┌──────────────────────────────────────────────────┐
		   │          ACTUALITZAR EL DEGREDAT EL NOM          │
		   └──────────────────────────────────────────────────┘ */
		
		const h1 = color['H'];
		const h2 = color['H'] + color['range'];
		const c = 'linear-gradient( 45deg, hsl( ' + h1 + ', ' + color['S'] + '%, ' + color['L'] + '% ) 0%, hsl( ' + h2 + ', ' + color['S'] + '%, ' + color['L'] + '% ) 100% )';
		firma.style.backgroundImage = c;
	}

	/*document.body.addEventListener('mousemove', function( event ) {
		const h1 = floor(map( mouseX, 0, posX * 2, color['H'], color['H']+color['range'] ));
		const h2 = floor(map( mouseY, 0, posY * 2, color['H'], color['H']+color['range'] ));
		const c = 'linear-gradient( 45deg, hsl( ' + h1 + ', ' + color['S'] + '%, ' + color['L'] + '% ) 0%, hsl( ' + h2 + ', ' + color['S'] + '%, ' + color['L'] + '% ) 100% )';
		firma.style.backgroundImage = c;
	} );*/
</script>

</html>