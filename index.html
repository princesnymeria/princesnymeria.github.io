<!DOCTYPE html>
<html lang="en">

<!--
╔══════════════════════════════════════════════════╗
║                                                  ║
║                 DOM amb la firma                 ║
║                                                  ║
╚══════════════════════════════════════════════════╝
-->

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>Mar Kralovna</title>
	<script src="recursos/llibreries/p5js/p5.js"></script>
</head>


<body onclick=" location.href = 'gallery' ">
	<div class="centered">
		<h1 id="firma">Mar<br>Kralovna</h1>
	</div>
	<!-- <svg id="firma" xmlns="http://www.w3.org/2000/svg" width="200" height="50" viewBox="0 0 200 50" >
		<path d="m 5 30 c 9.399125,-6.5285 17.975035,-39.00331 36.247916,-0.52918 8.853811,-22.61962 16.665742,-30.35328 29.368751,0.26459 6.357494,-6.36196 9.93712,-14.32798 26.458328,-21.9604 -22.066002,9.31525 2.30361,46.89162 17.4625,12.96457 l 5.55625,-12.43541 c 5.23342,9.83884 10.42433,17.85984 19.31458,21.69582 12.18808,5.25894 9.63263,-46.17915 39.80635,-1.14278 3.68999,5.1926 11.52282,1.40737 11.52282,1.40737" />
	</svg> -->
</body>





<!--
╔══════════════════════════════════════════════════╗
║                                                  ║
║                      ESTILS                      ║
║                                                  ║
╚══════════════════════════════════════════════════╝
-->


<style>
	@font-face {
		font-family: font;
		src: url(./recursos/fonts/Poiret_One/PoiretOne-Regular.ttf);
	}

	.centered {
		position: absolute;
		top: 50%;
		left: 50%;
		transform: translate(-50%, -50%);
		/*height: 100px;*/
		width: max-content;
		text-align: center;
	}

	#firma {
		font-family: font;
		font-size: 48pt;
		background: hsl(240, 60%, 70%);
		background-clip: border-box;
		-webkit-background-clip: text;
		-webkit-text-fill-color: transparent;
		/*text-transform: uppercase;*/
	}

	body {
		margin: 0;
		height: 100vh;
		width: 100vw;
		overflow: hidden;
		background: hsl(0, 0%, 13%);
	}

	@media only screen and (max-width: 500px) { #firma { font-size: 32pt; } }
	@media only screen and (max-width: 250px) { #firma { font-size: 24pt; } }
</style>





<!--
╔══════════════════════════════════════════════════╗
║                                                  ║
║          lÒGICA de la geomatria de fons          ║
║                                                  ║
╚══════════════════════════════════════════════════╝
-->


<script>
	const MODE_DEBUG = false;
	const planets = [];

	function setup() {
		createCanvas(window.innerWidth, window.innerHeight);

		frameRate(48);

		angleMode(RADIANS);
		noFill();
		colorMode(HSL);

		loadPlanets();
		clearCanvas();
	}

	function loadPlanets() {
		const pos = createVector(width * .5, height * .5);
		const R = width * random(.2, .4);//const R = width * .35;
		const r = width * random(.1, .2);//const r = width * .15;
		const S = random(.001, .005);//const S = .005;
		const s = random(.005, .010);//const s = .01;
		const a = TAU/3;//const a = TAU/3;
		planets.push(new Planet(pos, R, S, 180, a*1));
		planets.push(new Planet(pos, R, S, 240, a*2));
		planets.push(new Planet(pos, R, S, 300, a*3));
		planets[0].addSatellite(new Planet(pos, r, s, 180, a*1));
		planets[1].addSatellite(new Planet(pos, r, s, 240, a*2));
		planets[2].addSatellite(new Planet(pos, r, s, 300, a*3));
	}

	function draw() {
		if (MODE_DEBUG) clearCanvas();
		planets.forEach(p => {
			p.update();
			if (MODE_DEBUG) p.displayHelper();
			else p.display();
		});
	}

	function clearCanvas() {
		background(8);
	}

	class Planet {
		constructor (position, orbitRadius, speed, colorHue, initialFase) {
			this.orbitCenter = position;
			this.orbitRadius = orbitRadius;
			this.speed = speed;
			this.fase = initialFase;
			this.color = { 'H':colorHue, 'S':80 , 'L': 70, 'a': .025 };
			this.satellites = [];
		}
		addSatellite (planet) {
			this.satellites.push(planet);
		}
		setOrbitCenter (pos) {
			this.orbitCenter = pos;
		}
		getPosition () {
			const x = this.orbitCenter.x + cos( this.fase ) * this.orbitRadius * 0.5 ;
			const y = this.orbitCenter.y + sin( this.fase ) * this.orbitRadius * 0.5 ;
			return createVector(x, y);
		}
		update () {
			this.fase += this.speed;
			if (this.fase >= TAU) this.fase = 0;
			this.satellites.forEach(satellite => {
				satellite.setOrbitCenter(this.getPosition());
				satellite.update();
			});
		}
		display () {
			if (this.satellites.length > 0)
				this.satellites.forEach(sat => {
					const c = color(this.color['H'], this.color['S'], this.color['L']);
					c.setAlpha( 0.1 );
					strokeWeight(10);
					stroke( c );
					sat.display();
				});
			else {
				const p = this.getPosition();
				point(p.x + random(-1, 1), p.y + random(-.5, .5));//line(this.orbitCenter.x, this.orbitCenter.y, p.x, p.y);
			}
		}
		displayHelper () {
			const p = this.getPosition();
			const c = color(this.color['H'], this.color['S'], this.color['L']);
			c.setAlpha( 0.2 ); strokeWeight(30); 
			point(this.orbitCenter.x, this.orbitCenter.y);
			c.setAlpha( 0.25 ); stroke( c );
			point(p.x, p.y);
			c.setAlpha( 0.4 ); strokeWeight(4); stroke( c );
			circle(this.orbitCenter.x, this.orbitCenter.y, this.orbitRadius);
			this.satellites.forEach(satellite => {
				satellite.displayHelper();
			});
		}
	}
</script>

</html>